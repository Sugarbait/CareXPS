# Azure Deployment Environment Variables for CareXPS Healthcare CRM
# Copy this file to .env.email on Azure and fill in your actual values

# ================================
# EMAIL PROVIDER CONFIGURATION
# ================================

# Email Provider: 'sendgrid' (recommended for Azure) or 'hostinger' (local development)
EMAIL_PROVIDER=sendgrid

# Email Server Port (default: 4001)
EMAIL_SERVER_PORT=4001

# ================================
# SENDGRID CONFIGURATION (Azure)
# ================================

# SendGrid API Key (required for Azure deployment)
# Get your API key from: https://app.sendgrid.com/settings/api_keys
# Azure Free Tier: 25,000 emails/month
SENDGRID_API_KEY=your-sendgrid-api-key-here

# SendGrid Sender Email (verified sender)
# Must be verified in SendGrid: https://app.sendgrid.com/settings/sender_auth
SENDGRID_FROM_EMAIL=carexps@phaetonai.com

# SendGrid Sender Name (displayed in emails)
SENDGRID_FROM_NAME=Healthcare CRM

# ================================
# HOSTINGER SMTP (Local Development)
# ================================

# Hostinger Email Password (only needed if using hostinger provider)
# HOSTINGER_EMAIL_PASSWORD=your-hostinger-password-here

# ================================
# SETUP INSTRUCTIONS
# ================================

# 1. Create SendGrid Account (Azure Free Tier):
#    - Visit: https://portal.azure.com/
#    - Search for "SendGrid Accounts"
#    - Click "Create" and select Free tier (25,000 emails/month)
#    - Complete registration

# 2. Verify Sender Email:
#    - Go to: https://app.sendgrid.com/settings/sender_auth
#    - Click "Verify a Single Sender"
#    - Add carexps@phaetonai.com and complete verification
#    - Check your email for verification link

# 3. Create API Key:
#    - Go to: https://app.sendgrid.com/settings/api_keys
#    - Click "Create API Key"
#    - Name: "CareXPS Email Notifications"
#    - Permissions: Full Access (or Mail Send only for security)
#    - Copy the API key (you won't be able to see it again!)
#    - Paste it in SENDGRID_API_KEY above

# 4. Deploy to Azure:
#    - Add these environment variables to Azure Static Web App Configuration
#    - Or create .env.email file in Azure deployment
#    - Restart email server

# 5. Test Configuration:
#    - Start email server: npm run email-server
#    - Send test email: POST to http://localhost:4001/api/test-email
#    - Check health: GET http://localhost:4001/health

# ================================
# SECURITY NOTES
# ================================

# - Never commit this file with actual API keys to git
# - Use Azure Key Vault for production secrets
# - SendGrid API key should have minimal required permissions
# - Rotate API keys regularly (every 90 days recommended)
# - Monitor SendGrid usage to avoid quota limits
# - Enable SendGrid email validation to reduce bounces

# ================================
# HIPAA COMPLIANCE
# ================================

# - SendGrid is HIPAA-compliant when configured correctly
# - Disable click tracking (already disabled in code)
# - Disable open tracking (already disabled in code)
# - Never include PHI in email subject or body
# - Use notification templates that contain no PHI
# - Emails only notify of events, no patient data

# ================================
# TROUBLESHOOTING
# ================================

# Error: "SendGrid API key not configured"
# Solution: Ensure SENDGRID_API_KEY is set and EMAIL_PROVIDER=sendgrid

# Error: "Sender email not verified"
# Solution: Complete sender verification in SendGrid dashboard

# Error: "API key does not have permission"
# Solution: Recreate API key with "Mail Send" or "Full Access" permissions

# Error: "Daily sending limit exceeded"
# Solution: Upgrade SendGrid plan or wait for quota reset

# For more help: https://docs.sendgrid.com/